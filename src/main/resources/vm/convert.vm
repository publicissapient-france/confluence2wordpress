#*
 * Copyright 2011 Alexandre Dutra
 *
 *    Licensed under the Apache License, Version 2.0 (the "License");
 *    you may not use this file except in compliance with the License.
 *    You may obtain a copy of the License at
 *
 *        http://www.apache.org/licenses/LICENSE-2.0
 *
 *    Unless required by applicable law or agreed to in writing, software
 *    distributed under the License is distributed on an "AS IS" BASIS,
 *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *    See the License for the specific language governing permissions and
 *    limitations under the License.
 *#
<html>
<head>
<title>$action.getText("confluence2wordpress.converter")</title>
<meta name="decorator" content="atl.general"/>
</head>
<body>

<h2>$action.getText("options")</h2>

<form id="options" action="convert.action" method="post">

<input type="hidden" name="pageId" value="$action.pageId" />
<input type="hidden" name="actionId" value="$action.actionId" />

<fieldset style="line-height:24px;float:left;margin-bottom:10px;width:48%;border:1px solid #326CA6;-moz-border-radius:5px;border-radius:5px;-khtml-border-radius:5px;-webkit-border-radius:5px;" >

<legend><h3>$action.getText("conversion.options")</h3></legend>

<div>
<label style="float:left;width:40%;margin:0;padding:0">$action.getText("page.to.translate")&nbsp;:&nbsp;</label>
<a href="$action.confluenceRootUrl/$action.page.urlPath"><strong>$action.page.displayTitle</strong> (v. $action.page.version - ID $action.pageId)</a>
</div>

<div>
<label style="float:left;width:40%;margin:0;padding:0" for="pageTitle">$action.getText("form.pageTitle.label")&nbsp;:&nbsp;</label>
<td><input id="pageTitle" name="pageTitle" type="text" value="$action.pageTitle" style="width:58%"/>
</div>

<div>
<label style="float:left;width:40%;margin:0;padding:0" for="baseUrl">$action.getText("form.baseUrl.label")&nbsp;:&nbsp;</label>
<input id="baseUrl" name="baseUrl" type="text" value="$!action.baseUrl" style="width:58%" />
</div>

<div>
<label style="float:left;width:40%;margin:0;padding:0" for="ignoreConfluenceMacros">$action.getText("form.ignoreConfluenceMacros.label")&nbsp;:&nbsp;</label>
<input id="ignoreConfluenceMacros" name="ignoreConfluenceMacros" type="text" value="$action.ignoreConfluenceMacros" style="width:58%" />
</div>

<div>
<label style="float:left;clear:both;width:40%;margin:0;padding:0" for="optimizeForRDP">$action.getText("form.optimizeForRDP.label")&nbsp;:&nbsp;</label>
<input id="optimizeForRDP" name="optimizeForRDP" value="true" type="checkbox" checked="$action.optimizeForRDP" />
</div>

<div style="clear:both;text-align:center;margin-top:2%">
<input type="submit" value="$action.getText("form.button.convert")" onclick="this.form.actionId.value='CONVERT'" />
<input type="button" value="$action.getText("form.button.cancel")" onclick="document.location='$baseUrl/$action.page.urlPath'" />
</div>

</fieldset>


<fieldset style="line-height:24px;float:right;margin-bottom:10px;width:47%;border:1px solid #326CA6;-moz-border-radius:5px;border-radius:5px;-khtml-border-radius:5px;-webkit-border-radius:5px;" >

<legend><h3>$action.getText("post.options")</h3></legend>


<div>
<label for="wordpressUserId">$action.getText("form.wordpressUserId.label")&nbsp;:&nbsp;</label>
<select id="wordpressUserId" name="wordpressUserId">
#foreach($wordpressUser in $action.wordpressUsers)
<option value="$wordpressUser.id" #if( $wordpressUser.id == $action.wordpressUserId ) selected="true" #end >$!wordpressUser.displayName $!wordpressUser.firstName $!wordpressUser.lastName</option>
#end
</select>
</div>

<div style="float:left;width:50%;margin-top:5px">
<label for="wordpressCategoryIds">$action.getText("form.wordpressCategoryIds.label")&nbsp;:&nbsp;</label>
<br />
<select style="width:99%" id="wordpressCategoryIds" name="wordpressCategoryIds" multiple="true">
#foreach($wordpressCategory in $action.wordpressCategories)
<option value="$wordpressCategory.id" #if( $action.wordpressCategoryIds.contains($wordpressCategory.id) ) selected="true" #end >$wordpressCategory.categoryName</option>
#end
</select>
</div>

<div style="float:left;width:50%;margin-top:5px">
<label for="wordpressTagNames">$action.getText("form.wordpressTagNames.label")&nbsp;:&nbsp;</label>
<br />
<select style="width:99%" id="wordpressTagIds" name="wordpressTagNames" multiple="true">
#foreach($wordpressTag in $action.wordpressTags)
<option value="$wordpressTag.name" #if( $action.wordpressTagNames.contains($wordpressTag.name) ) selected="true" #end >$wordpressTag.name</option>
#end
</select>
</div>

<div style="clear:both;text-align:center;margin-top:2%">
<input type="submit" value="$action.getText("form.button.post")" onclick="this.form.actionId.value='POST'" />
</div>

</fieldset>

<h2 style="clear:both">$action.getText("preview")</h2>

<fieldset style="clear:both;float:left;width:48%;border:1px solid #326CA6;-moz-border-radius:5px;border-radius:5px;-khtml-border-radius:5px;-webkit-border-radius:5px;" >
<legend><h3>$action.getText("conversion.input")</h3></legend>
<textarea style="border:none;margin:0;padding:0;width:100%;font-family:monospace" rows="20" readonly="true" wrap="off">$action.wikiMarkupEscaped</textarea>
</fieldset>

<fieldset style="float:right;width:47%;border:1px solid #326CA6;-moz-border-radius:5px;border-radius:5px;-khtml-border-radius:5px;-webkit-border-radius:5px;" >
<legend><h3>$action.getText("conversion.output")</h3></legend>
<textarea style="border:none;margin:0;padding:0;width:100%;font-family:monospace" rows="20" readonly="true" wrap="off">$action.htmlMarkupEscaped</textarea>
</fieldset>

</form>

</body>
</html>